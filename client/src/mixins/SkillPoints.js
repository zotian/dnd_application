/* eslint-disable */
export const SkillPoints = {
    data(){ 
        return{
            skills:[            
                {id:'appraise', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'int', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'balance', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'dex', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'bluff', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'cha', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'climb', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'str', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'concentration', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'con', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'craft', isText:true, text:'', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'int', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'craft', isText:true, text:'', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'int', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'craft', isText:true, text:'', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'int', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'decipher script', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'int', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'diplomacy', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'cha', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'disable device', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'int', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'disguise', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'cha', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'escape artist', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'dex', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'forgery', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'int', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'gather information', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'cha', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'handle animal', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'cha', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'heal', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'wis', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'hide', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'dex', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'intimidate', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'cha', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'jump', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'str', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'knowledge', isText:true, text:'', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'int', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'knowledge', isText:true, text:'', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'int', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'knowledge', isText:true, text:'', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'int', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'knowledge', isText:true, text:'', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'int', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'knowledge', isText:true, text:'', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'int', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'listen', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'wis', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'move silently', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'dex', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'open lock', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'dex', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'perform', isText:true, text:'', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'cha', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'perform', isText:true, text:'', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'cha', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'perform', isText:true, text:'', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'cha', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'profession', isText:true, text:'', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'wis', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'profession', isText:true, text:'', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'wis', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'ride', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'dex', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'search', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'int', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'sense motive', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'wis', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'sleight of hand', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'dex', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'spellcraft', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'int', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'spot', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'wis', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'survival', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'wis', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'swim', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'str', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'tumble', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'dex', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'use magic device', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'cha', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}},
                {id:'use rope', isClassSkill:false, isCrossSkill:true,isClicked:false, value:{keyAbility:'dex', skillModifier:null,abilityModifier:null,ranks:0,miscModifier:0}}            
            ],
        }   
    },


    // LOGIC TO CALCULATE RANKS
    methods:{
        calculateRanks(){
            // FIRST CHECK IF CONDITIONS ARE MET TO CALCULATE RANK POINTS (class,level,race)
            let x=this.class_;
            let y=this.level;
            let z=this.race;
            if((x.length>1 && y>0) && z.length>1){
               this.isConditionForRanks=true
               this.errorMessageForRanks = ''
            }else{
                this.errorMessageForRanks = "Please choose your " + (x.length > 1 ? '' : 'Class, ') + (y > 0 ? '' : 'Level, ') + (z.length > 1 ? '' : 'Race, ') + ' to continue'
                return;
            }
            // IF CONDITIONS OK , CALCULATE RANKS
            let checkForHuman = 0;
            this.race === 'Human' ? checkForHuman = 1 : checkForHuman = 0
            for(let x=0; x<this.classes.length; x++){
                if(this.classes[x].isClass === true){
                    if(this.level === 1){
                        this.checkForLevel1 = true;
                        this.checkLevelForRanks = [],
                        this.totalRanks=[],
                        
                        this.checkLevelForRanks.push(this.level)
                        this.totalRanks.push((this.abilityModifier[3].value + this.classes[x].ranksPerLevel + checkForHuman) * 4)
                        this.unspentRanks = (this.abilityModifier[3].value + this.classes[x].ranksPerLevel + checkForHuman) * 4

                        this.spentCrossRanks = 0
                        this.spentClassRanks =0
                        for (let z=0; z<=43; z++){
                            if(this.skills[z].isClassSkill){
                                if(this.skills[z].value.ranks>this.level+3){
                                    this.skills[z].value.ranks = this.level+3
                                    this.spentClassRanks += this.skills[z].value.ranks
                                }else{
                                    this.spentClassRanks += Number(this.skills[z].value.ranks)
                                    this.unspentRanks = this.totalRanks[this.level-1] - this.spentCrossRanks - this.spentClassRanks
                                }            
                            }else{
                                if(this.skills[z].value.ranks>Math.floor((this.level+3)/2)){
                                    this.skills[z].value.ranks = Math.floor((this.level+3)/2)
                                    this.spentCrossRanks += ((this.skills[z].value.ranks) * 2)
                                }else{
                                    this.spentCrossRanks += this.skills[z].value.ranks*2
                                    this.unspentRanks = this.totalRanks[this.level-1] - this.spentCrossRanks - this.spentClassRanks
                                }
                            }
                        } 
                        this.unspentRanks = this.totalRanks[this.level-1] - this.spentCrossRanks - this.spentClassRanks

                    }else{
                        if(this.checkForLevel1===false){
                            this.checkForLevel1 = true;
                            for(let i=1; i<=this.level; i++){
                                this.checkLevelForRanks.push(i)
                                if(i===1){
                                    this.totalRanks.push((this.abilityModifier[3].value + this.classes[x].ranksPerLevel + checkForHuman) * 4)
                                    this.unspentRanks += (this.abilityModifier[3].value + this.classes[x].ranksPerLevel + checkForHuman) * 4
                                    this.spentCrossRanks = 0
                                    this.spentClassRanks =0
                                    for (let z=0; z<=43; z++){
                                        if(this.skills[z].isClassSkill){
                                            if(this.skills[z].value.ranks>this.level+3){
                                                this.skills[z].value.ranks = this.level+3
                                                this.spentClassRanks += this.skills[z].value.ranks
                                            }else{
                                                this.spentClassRanks += Number(this.skills[z].value.ranks)
                                                this.unspentRanks = this.totalRanks[this.level-1] - this.spentCrossRanks - this.spentClassRanks
                                            }            
                                        }else{
                                            if(this.skills[z].value.ranks>Math.floor((this.level+3)/2)){
                                                this.skills[z].value.ranks = Math.floor((this.level+3)/2)
                                                this.spentCrossRanks += ((this.skills[z].value.ranks) * 2)
                                            }else{
                                                this.spentCrossRanks += this.skills[z].value.ranks*2
                                                this.unspentRanks = this.totalRanks[this.level-1] - this.spentCrossRanks - this.spentClassRanks
                                            }
                                        }
                                    } 
                                    this.unspentRanks = this.totalRanks[this.level-1] - this.spentCrossRanks - this.spentClassRanks
                                }else{
                                    this.totalRanks.push((this.totalRanks[i-2])+(this.abilityModifier[3].value + this.classes[x].ranksPerLevel + checkForHuman))
                                    this.unspentRanks += this.abilityModifier[3].value + this.classes[x].ranksPerLevel + checkForHuman
                                    this.spentCrossRanks = 0
                                    this.spentClassRanks =0
                                    for (let z=0; z<=43; z++){
                                        if(this.skills[z].isClassSkill){
                                            if(this.skills[z].value.ranks>this.level+3){
                                                this.skills[z].value.ranks = this.level+3
                                                this.spentClassRanks += this.skills[z].value.ranks
                                            }else{
                                                this.spentClassRanks += Number(this.skills[z].value.ranks)
                                                this.unspentRanks = this.totalRanks[this.level-1] - this.spentCrossRanks - this.spentClassRanks
                                            }            
                                        }else{
                                            if(this.skills[z].value.ranks>Math.floor((this.level+3)/2)){
                                                this.skills[z].value.ranks = Math.floor((this.level+3)/2)
                                                this.spentCrossRanks += ((this.skills[z].value.ranks) * 2)
                                            }else{
                                                this.spentCrossRanks += this.skills[z].value.ranks*2
                                                this.unspentRanks = this.totalRanks[this.level-1] - this.spentCrossRanks - this.spentClassRanks
                                            }
                                        }
                                    } 
                                    this.unspentRanks = this.totalRanks[this.level-1] - this.spentCrossRanks - this.spentClassRanks
                                }
                            }
                        }else{
                            if(this.level === this.checkLevelForRanks.length){
                                return this.unspentRanks;
                            }
                            if(this.level > this.checkLevelForRanks.length){
                                for( let i=this.checkLevelForRanks.length+1; i<=this.level; i++){
                                    this.checkLevelForRanks.push(i)
                                    this.totalRanks.push((this.totalRanks[i-2]) + (this.abilityModifier[3].value + this.classes[x].ranksPerLevel + checkForHuman))
                                    this.unspentRanks += this.abilityModifier[3].value + this.classes[x].ranksPerLevel + checkForHuman
                                    this.spentCrossRanks = 0
                                    this.spentClassRanks =0
                                    for (let z=0; z<=43; z++){
                                        if(this.skills[z].isClassSkill){
                                            if(this.skills[z].value.ranks>this.level+3){
                                                this.skills[z].value.ranks = this.level+3
                                                this.spentClassRanks += this.skills[z].value.ranks
                                            }else{
                                                this.spentClassRanks += Number(this.skills[z].value.ranks)
                                                this.unspentRanks = this.totalRanks[this.level-1] - this.spentCrossRanks - this.spentClassRanks
                                            }            
                                        }else{
                                            if(this.skills[z].value.ranks>Math.floor((this.level+3)/2)){
                                                this.skills[z].value.ranks = Math.floor((this.level+3)/2)
                                                this.spentCrossRanks += ((this.skills[z].value.ranks) * 2)
                                            }else{
                                                this.spentCrossRanks += this.skills[z].value.ranks*2
                                                this.unspentRanks = this.totalRanks[this.level-1] - this.spentCrossRanks - this.spentClassRanks
                                            }
                                        }
                                    } 
                                    this.unspentRanks = this.totalRanks[this.level-1] - this.spentCrossRanks - this.spentClassRanks
                                }
                            }
                            if(this.level < this.checkLevelForRanks.length){
                                for(let i=this.checkLevelForRanks.length; i>this.level; i--){
                                    this.checkLevelForRanks.pop()
                                    this.totalRanks.pop()
                                    this.unspentRanks -= this.abilityModifier[3].value + this.classes[x].ranksPerLevel + checkForHuman
                                    this.spentCrossRanks = 0
                                    this.spentClassRanks =0
                                    for (let z=0; z<=43; z++){
                                        if(this.skills[z].isClassSkill){
                                            if(this.skills[z].value.ranks>this.level+3){
                                                this.skills[z].value.ranks = this.level+3
                                                this.spentClassRanks += this.skills[z].value.ranks
                                            }else{
                                                this.spentClassRanks += Number(this.skills[z].value.ranks)
                                                this.unspentRanks = this.totalRanks[this.level-1] - this.spentCrossRanks - this.spentClassRanks
                                            }            
                                        }else{
                                            if(this.skills[z].value.ranks>Math.floor((this.level+3)/2)){
                                                this.skills[z].value.ranks = Math.floor((this.level+3)/2)
                                                this.spentCrossRanks += ((this.skills[z].value.ranks) * 2)
                                            }else{
                                                this.spentCrossRanks += this.skills[z].value.ranks*2
                                                this.unspentRanks = this.totalRanks[this.level-1] - this.spentCrossRanks - this.spentClassRanks
                                            }
                                        }
                                    } 
                                    this.unspentRanks = this.totalRanks[this.level-1] - this.spentCrossRanks - this.spentClassRanks
                                }
                            }        
                        }
                    }
                }
            }
        },

        // LOGIC TO SPENT RANK POINTS 
        spendRankPoints(){
            if(this.level > this.checkLevelForRanks.length){
                let checkForHuman = 0;
                this.race === 'Human' ? checkForHuman = 1 : checkForHuman = 0
                for(let x=0;x<this.classes.length; x++){
                    if(this.classes[x].isClass === true){
                        for( let i=this.checkLevelForRanks.length+1; i<=this.level; i++){
                            this.checkLevelForRanks.push(i)
                            this.totalRanks.push((this.totalRanks[i-2]) + (this.abilityModifier[3].value + this.classes[x].ranksPerLevel + checkForHuman))
                            this.unspentRanks += this.abilityModifier[3].value + this.classes[x].ranksPerLevel + checkForHuman
                            this.spentCrossRanks = 0
                            this.spentClassRanks =0
                            for (let z=0; z<=43; z++){
                                if(this.skills[z].isClassSkill){
                                    this.spentClassRanks += Number(this.skills[z].value.ranks)
                                    this.unspentRanks = this.totalRanks[this.level-1] - this.spentCrossRanks - this.spentClassRanks
                
                                }else{
                                    this.spentCrossRanks += this.skills[z].value.ranks*2
                                    this.unspentRanks = this.totalRanks[this.level-1] - this.spentCrossRanks - this.spentClassRanks
                                }
                            } 
                        }
                    }    
                } 
                return       
            } 
            this.spentCrossRanks = 0
            this.spentClassRanks =0
            for (let z=0; z<=43; z++){
                if(this.skills[z].isClassSkill){
                    this.spentClassRanks += Number(this.skills[z].value.ranks)
                    this.unspentRanks = this.totalRanks[this.level-1] - this.spentCrossRanks - this.spentClassRanks

                }else{
                    this.spentCrossRanks += this.skills[z].value.ranks*2
                    this.unspentRanks = this.totalRanks[this.level-1] - this.spentCrossRanks - this.spentClassRanks
                }
            }   
        }  
    },
}    